<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui" 
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
    <ui:composition template="/plantillas/sirec_plantilla1.xhtml">
        <ui:define name="contenido">
            <center>
                <h:form id="frmPropietario" style="font-size: 12px;">         
                    <p:growl id="msgs" showDetail="true"/>
                    <p:panel  header="Registro de Propietario">
                        <h:panelGrid id="pnlProp" columns="6">
                            <h:outputLabel value="Cédula/RUC:" for="proCi" />
                            <p:inputText id="proCi" value="#{propietarioControlador.propietarioActual.proCi}" 
                                         maxlength="13" title="ProCi" required="true" requiredMessage="The ProCi field is required."/>
                            <p:message for="proCi"/>
                            <h:outputLabel value="Tipo:" for="proTipoPersona" />
                            <p:selectOneMenu id="proTipoPersona" value="#{propietarioControlador.propietarioActual.proTipoPersona}">
                                <f:selectItem itemLabel="Natural" itemValue="N"/>
                                <f:selectItem itemLabel="Juridica" itemValue="J"/>
                            </p:selectOneMenu>
                            <p:message for="proTipoPersona"/>
                            <h:outputLabel value="Apellidos:" for="proApellidos" />
                            <p:inputText id="proApellidos" 
                                         value="#{propietarioControlador.propietarioActual.proApellidos}" 
                                         title="ProApellidos" required="true" 
                                         size="50"
                                         maxlength="200" requiredMessage="The ProApellidos field is required."/>
                            <p:message for="proApellidos"/>
                            <h:outputLabel value="Nombres:" for="proNombres" />
                            <p:inputText id="proNombres" 
                                         value="#{propietarioControlador.propietarioActual.proNombres}" 
                                         maxlength="200" 
                                         size="50"
                                         title="ProNombres" required="true" requiredMessage="The ProNombres field is required."/>
                            <p:message for="proNombres"/>
                            <h:outputLabel value="Fecha de Nacimiento:" for="proFechaNacimiento" />
                            <p:calendar id="proFechaNacimiento" 
                                        value="#{propietarioControlador.propietarioActual.proFechaNacimiento}" 
                                        title="ProFechaNacimiento" 
                                        required="true" 
                                        requiredMessage="The ProFechaNacimiento field is required."
                                        pattern="yyyy-MM-dd">
                            </p:calendar>
                            <p:message for="proFechaNacimiento"/>
                            <h:outputLabel value="Razon Social:" for="proRazonSocial" />
                            <p:inputText id="proRazonSocial" 
                                         size="50"
                                         value="#{propietarioControlador.propietarioActual.proRazonSocial}" title="ProRazonSocial" required="true" requiredMessage="The ProRazonSocial field is required."/>
                            <p:message for="proRazonSocial"/>
                            <h:outputLabel value="Direccion:" for="proDireccion" />
                            <p:inputTextarea id="proDireccion" 
                                         value="#{propietarioControlador.propietarioActual.proDireccion}" 
                                         title="ProDireccion"
                                         cols="50" rows="2"/>
                            <p:message for="proDireccion"/>
                            <h:outputLabel value="Telefono:" for="proTelefono" />
                            <p:inputText id="proTelefono" 
                                         value="#{propietarioControlador.propietarioActual.proTelefono}" 
                                         maxlength="100" 
                                         title="ProTelefono" />
                            <p:message for="proTelefono"/>
                            <h:outputLabel value="Correo:" for="proCorreo" />
                            <p:inputText id="proCorreo" value="#{propietarioControlador.propietarioActual.proCorreo}" 
                                         maxlength="100" 
                                         title="ProCorreo" />
                            <p:message for="proCorreo"/>
                            <h:outputLabel value="Tiene Discapacidad:" for="proDiscapacidad" />
                            <p:selectBooleanCheckbox id="proDiscapacidad" value="#{propietarioControlador.propietarioActual.proDiscapacidad}"/>
                            <p:message for="proDiscapacidad"/>
                            <h:outputLabel value="ProObservaciones:" for="proObservaciones" />
                            <p:inputText id="proObservaciones" value="#{propietarioControlador.propietarioActual.proObservaciones}" title="ProObservaciones" />
                            <p:message for="proObservaciones"/>
                            <h:outputLabel value="CatdetCiudad:" for="catdetCiudad" />
                            <h:selectOneMenu id="catdetCiudad" 
                                             value="#{propietarioControlador.propietarioActual.catdetCiudad.catdetCodigo}" 
                                             title="CatdetCiudad" required="true" 
                                             requiredMessage="The CatdetCiudad field is required.">

                                <f:selectItems value="#{propietarioControlador.listaCatCiudades}" 
                                               var="ciudad"
                                               itemLabel="#{ciudad.catdetTexto}"
                                               itemValue="#{ciudad.catdetCodigo}"/>
                            </h:selectOneMenu>
                            <p:message for="catdetCiudad"/>
                        </h:panelGrid>
                        <h:panelGrid columns="2">
                            <p:commandButton id="btnGuardarProp"
                                             value="Guardar"
                                             action="#{propietarioControlador.guardarPropietario}"
                                             async="true" global="false"
                                             update="@form"
                                             process="@this, pnlProp"/>
                            <p:commandButton id="btnNuevoProp"
                                             value="Nuevo"
                                             action="#{propietarioControlador.inicializar}"
                                             async="true" global="false"
                                             update="@form"/>
                        </h:panelGrid>
                    </p:panel>

                    <p:panel>
                        <h:panelGrid>
                            <p:dataTable value="#{propietarioControlador.listaPropietarios}" var="item">
                                <p:column headerText="Cédula/RUC">
                                    <h:outputText value="#{item.proCi}"/>
                                </p:column>
                                <p:column headerText="Tipo">
                                    <h:outputText value="#{item.proTipoPersona}"/>
                                </p:column>
                                <p:column headerText="Apellidos y Nombres">
                                    <h:outputText value="#{item.proApellidos} #{item.proNombres}"/>
                                </p:column>
                                <p:column headerText="Fecha Nac">
                                    <h:outputText value="#{item.proFechaNacimiento}">
                                        <f:convertDateTime pattern="MM/dd/yyyy" />
                                    </h:outputText>
                                </p:column>
                                <p:column headerText="Razon Social">
                                    <h:outputText value="#{item.proRazonSocial}"/>
                                </p:column>
                                <p:column headerText="Ciudad">
                                    <h:outputText value="#{item.catdetCiudad.catdetTexto}"/>
                                </p:column>
                                <p:column headerText="Dirección">
                                    <h:outputText value="#{item.proDireccion}"/>
                                </p:column>
                                <p:column headerText="Teléfono">
                                    <h:outputText value="#{item.proTelefono}"/>
                                </p:column>
                                <p:column headerText="Correo">
                                    <h:outputText value="#{item.proCorreo}"/>
                                </p:column>
                                <p:column headerText="Disc">
                                    <h:selectBooleanCheckbox value="#{item.proDiscapacidad}" disabled="true"/>
                                </p:column>
                                <p:column headerText="Observaciones">
                                    <h:outputText value="#{item.proObservaciones}"/>
                                </p:column>
                                <p:column headerText="">
                                    <p:commandButton id="btnSelProp"
                                                     action="#{propietarioControlador.seleccionarPropietario(item)}"
                                                     process="@this"
                                                     async="true"
                                                     global="false"
                                                     icon="ui-icon-pencil"
                                                     update="@form"/>
                                    
                                </p:column>
                            </p:dataTable>
                        </h:panelGrid>
                    </p:panel>
                </h:form>


            </center>

        </ui:define>
    </ui:composition>
</html>
