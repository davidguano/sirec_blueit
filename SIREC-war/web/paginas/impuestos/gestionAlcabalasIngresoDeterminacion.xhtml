<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
                
                <center>
                    <h:panelGrid id="panelContieneAplicacion1" width="1000" columns="1" >                                                 
                            <p:panel header="#{txt.INGRESO}">                                
                                <h:panelGrid id="panelIngreso" columns="2">                                                                                                       
                                <p:outputLabel value="#{txt.clave_catastral}"/>
                                
                                <p:selectOneMenu id="alPred" value="#{gestionAlcabalasControlador.catastroPredialActual}" style="width:154px"
                                                         converter="#{catastroPredialConverter}" var="t">
                                            <f:selectItem itemLabel="Seleccione..." itemValue="" /> 
                                            <f:selectItems var="tipo" 
                                                           value="#{gestionAlcabalasControlador.listaCatastroPredial}" 
                                                           itemLabel="#{tipo.catpreCodNacional}#{tipo.catpreCodLocal}" 
                                                           itemValue="#{tipo}"/> 
                                            <p:column width="200" style="white-space: normal">  
                                                <h:outputText escape="false" value="#{t.catpreCodNacional}#{t.catpreCodLocal}" style="font-size: 10px"/> 
                                            </p:column> 
                                            <p:ajax listener="#{gestionAlcabalasControlador.obtenerCamposCatPredial}"  update=":frmAlcabalas:tabAlca:panelContieneAplicacion1"
                                         process="@this" async="true" global="false"/>                                             
                                        </p:selectOneMenu> 
                                
                                <p:outputLabel value="#{txt.anio}"/>
                                <p:selectOneMenu id="alAnio" value="#{gestionAlcabalasControlador.catastroPredialAlcabalaValoracion.catprealcvalAnio}" style="width:152px">
                                            <f:selectItem itemLabel="Seleccione..." itemValue="" /> 
                                            <f:selectItem itemLabel="2015" itemValue="2015" />
                                            <f:selectItem itemLabel="2016" itemValue="2015" />          
                                            <f:selectItem itemLabel="2017" itemValue="2015" />          
                                        </p:selectOneMenu>
                                
                                <p:outputLabel value="#{txt.parroquia}"/>
                                <p:inputText id="alParr" value="#{gestionAlcabalasControlador.catastroPredialActual.catpreCodNacional}"                                                     
                                             disabled="true"/>
                                
                                <p:outputLabel value="#{txt.sector}"/>
                                <p:inputText id="alSec" value="#{gestionAlcabalasControlador.catastroPredialActual.catpreNombreSector}" 
                                            disabled="true"/>
                                
                                <p:outputLabel value="#{txt.direccion}"/>
                                <p:inputText id="alDir" value="#{gestionAlcabalasControlador.propietario.proDireccion}"
                                            disabled="true"/>
                                
                                 <p:outputLabel value="#{txt.vendedor}"/>
                                 <p:inputText id="alVen" value="#{gestionAlcabalasControlador.propietario.proNombres} #{gestionAlcabalasControlador.propietario.proApellidos}"
                                            disabled="true"/>
                                 
                                <p:outputLabel value="#{txt.comprador}"/>
                                <p:inputText id="alCom" value="#{gestionAlcabalasControlador.catastroPredialAlcabalaValoracion.catprealcvalComprador}"   
                                            />
                                
                                <p:outputLabel value="#{txt.area_de_terreno}"/>
                                <p:inputText id="alTerr" value="#{gestionAlcabalasControlador.catastroPredialActual.catpreAreaTotal}"
                                             disabled="true" />
                                
                                <p:outputLabel value="#{txt.area_de_construccion}"/>
                                <p:inputText id="alCons" value="#{gestionAlcabalasControlador.catastroPredialActual.catpreAreaTotalCons}"
                                             disabled="true" />
                                
                                <p:outputLabel value="#{txt.area_total}"/>
                                <p:inputText id="alTot" value="#{gestionAlcabalasControlador.catastroPredialActual.catpreAreaTotal+gestionAlcabalasControlador.catastroPredialActual.catpreAreaTotalCons}"
                                             disabled="true" />
                                
                                <p:outputLabel value="#{txt.avaluo_actual}"/>
                                <p:inputText id="alAva" value="#{gestionAlcabalasControlador.catastroPredialValoracionActual.catprevalAvaluoTot}"   
                                             disabled="true" />
                                
                                <p:outputLabel value="#{txt.precio_de_venta}"/>
                                <p:inputText id="alPrec" value="#{gestionAlcabalasControlador.catastroPredialAlcabalaValoracion.catprealcvalPrecioventa}"
                                             onkeypress="return isDecimalKey(event)">
                                    <p:ajax event="keyup" listener="#{gestionAlcabalasControlador.valorMayorBaseImponible}"  update=":frmAlcabalas:tabAlca:panelPlusvalia"
                                         process="@this" async="true" global="false"/>  
                                </p:inputText>
                                
                                <p:outputLabel value="#{txt.concepto}"/>
                                <p:selectOneMenu id="alConc" value="#{gestionAlcabalasControlador.catastroPredialAlcabalaValoracion.catdetConcepto}" style="width:154px"
                                                         converter="#{catalogoDetalleConverter}" var="t">
                                            <f:selectItem itemLabel="Seleccione..." itemValue="" /> 
                                            <f:selectItems var="tipo" 
                                                           value="#{gestionAlcabalasControlador.listaCatalogoDetalleConcepto}" 
                                                           itemLabel="#{tipo.catdetTexto}" 
                                                           itemValue="#{tipo}"/> 
                                            <p:column width="200" style="white-space: normal">  
                                                <h:outputText escape="false" value="#{t.catdetTexto}" style="font-size: 10px"/> 
                                            </p:column>                                                                             
                                        </p:selectOneMenu>                                                                                                 
                                 </h:panelGrid>
                                </p:panel>
                            
                            <p:panel header="#{txt.DETERMINACION}">
                             
                                <h:panelGrid id="pnlCalcular" columns="2">                                                                                                       
                                <p:commandButton value="#{txt.CALCULAR_btn}" 
                                                     id="btnCalcular" 
                                                     action="#{gestionAlcabalasControlador.calcularDeterminacion()}" 
                                                     icon="ui-icon-disk"  
                                                     process="@this,alAva,alPrec" 
                                                     update=":frmAlcabalas:tabAlca:pnlCalcular"
                                                     async="true"
                                                     global="false"
                                                     />
                                <center></center>
                                
                                <p:outputLabel value="#{txt.base_imponible}"/>
                                <p:inputText id="alBas" value="#{gestionAlcabalasControlador.catastroPredialAlcabalaValoracion.catprealcvalBaseimp}" 
                                             disabled="true" />
                                
                                <p:outputLabel value="#{txt.impuesto}"/>
                                <p:inputText id="alImp" value="#{gestionAlcabalasControlador.catastroPredialAlcabalaValoracion.catprealcvalImpuesto}" 
                                            disabled="true" />
                                
                                <p:outputLabel value="#{txt.consejo_provincial}"/>
                                <p:inputText id="alConProv" value="#{gestionAlcabalasControlador.catastroPredialAlcabalaValoracion.catprealcvalConsejoProv}" 
                                            disabled="true" />
                                
                                <p:outputLabel value="#{txt.procesamiento}"/>
                                <p:inputText id="alProc" value="#{gestionAlcabalasControlador.catastroPredialAlcabalaValoracion.catprealcvalTasaProc}" 
                                            disabled="true" />
                                
                                <p:outputLabel value="#{txt.total}"/>
                                <p:inputText id="alTotal" value="#{gestionAlcabalasControlador.catastroPredialAlcabalaValoracion.catprealcvalTotal}" 
                                             disabled="true" />
                                
                                <p:outputLabel value="#{txt.observaciones}"/>
                                <p:inputTextarea id="alObs" value="#{gestionAlcabalasControlador.catastroPredialAlcabalaValoracion.catprealcvalObservaciones}"
                                                 rows="3" />
                                 </h:panelGrid>  
                                
                                  <p:commandButton value="#{txt.guardar_btn}" 
                                                     id="btnGuardar" 
                                                     action="#{gestionAlcabalasControlador.guardarAlcabala()}" 
                                                     icon="ui-icon-disk"  
                                                     process="@this,alAnio,alCom,alPrec,alConc,alBas,alImp,alConProv,alProc,alTotal,alObs" 
                                                     update=":frmAlcabalas:msgs"
                                                     async="true"
                                                     global="false"
                                                     />                                
                                </p:panel>                                                                                                                                                 
                  </h:panelGrid>
                </center>
</html> 