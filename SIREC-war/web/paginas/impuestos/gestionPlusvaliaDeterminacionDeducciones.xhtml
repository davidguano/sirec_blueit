<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
                
                <center>
                    <h:panelGrid id="panelPlusvalia" width="1000" columns="1" >                                                 
                        <p:panel id="pnlDet" header="#{txt.DETERMINACION}">                                
                                <h:panelGrid columns="2">
                                    
                                     <p:outputLabel value="TIPO DE TARIFA"/>
                                    
                                     <p:selectOneMenu id="pComTT" value="#{gestionAlcabalasControlador.catastroPredialPlusvaliaValoracion.catdetTipoTarifa}" style="width:154px"
                                                         converter="#{catalogoDetalleConverter}" var="t">
                                            <f:selectItem itemLabel="Seleccione..." itemValue="" /> 
                                            <f:selectItems var="tipo" 
                                                           value="#{gestionAlcabalasControlador.listaTipoDeTarifa}" 
                                                           itemLabel="#{tipo.catdetTexto}" 
                                                           itemValue="#{tipo}"/> 
                                            <p:column width="200" style="white-space: normal">  
                                                <h:outputText escape="false" value="#{t.catdetTexto}" style="font-size: 10px"/> 
                                            </p:column>                                                                             
                                        </p:selectOneMenu> 
                                     
                                     <p:outputLabel value="FECHA DE ÚLTIMA ESCRITURA" style="font-size: #{txt.font_size}"/>                                                                                                  
                                     <p:calendar id="fecUlEsc" value="#{gestionAlcabalasControlador.catastroPredialPlusvaliaValoracion.catprepluvalFechaUltescr}" />
                                     
                                     <p:outputLabel value="PRECIO DE VENTA ACTUAL"/>
                                     <p:inputText id="pPrecAct" value="#{gestionAlcabalasControlador.catastroPredialPlusvaliaValoracion.catprepluvalPrecioventa}"
                                                  disabled="true"/>
                                     <p:outputLabel value="PRECIO DE VENTA ANTERIOR"/>
                                     <p:inputText  id="pPrecAnt" value="#{gestionAlcabalasControlador.catastroPredialPlusvaliaValoracion.catprepluvalPrecioventaAnt}">
                                                   <p:ajax event="blur" listener="#{gestionAlcabalasControlador.calularDiferenciaBruta}"  update=":frmAlcabalas:tabAlca:pDifBruta,pMej,pDifNeta"
                                         process="@this,pPrecAnt,pPrecAct" async="true" global="false"/>  
                                     </p:inputText>
                                     
                                      <p:outputLabel value="DIFERENCIA BRUTA"/>
                                      <p:inputText id="pDifBruta" value="#{gestionAlcabalasControlador.catastroPredialPlusvaliaValoracion.catprepluvalDifBruta}"
                                                  disabled="true"/>
                                      
                                       <p:outputLabel value="MENOS VALORES DE CONTRIBUCIÓN POR MEJORAS"/>
                                       <p:inputText id="pMej" value="#{gestionAlcabalasControlador.catastroPredialPlusvaliaValoracion.catprepluvalValorContrmej}"
                                                  disabled="true"/>
                                      
                                        <p:outputLabel value="DIFERENCIA NETA"/>
                                        <p:inputText id="pDifNeta" value="#{gestionAlcabalasControlador.catastroPredialPlusvaliaValoracion.catprepluvalDifNeta}"
                                                  disabled="true"/>
                                        
                                        <p:outputLabel value="AÑOS TRANSCURRIDOS EN TRANSFERENCIA DE DOMINIO"/>
                                        <p:inputText id="pAnosTrans" value="#{gestionAlcabalasControlador.catastroPredialPlusvaliaValoracion.catprepluvalAniosTransf}"
                                                      >
                                             <p:ajax event="blur" listener="#{gestionAlcabalasControlador.calularValorAniosTranDominio()}"  update=":frmAlcabalas:tabAlca:pValAnosTrans,pDifFinal,pRebDes,pValRebDes,pBasImp,pImpuesto,pProc"
                                         process="@this,pDifNeta, pComTT" async="true" global="false"/> 
                                        </p:inputText>
                                        
                                        <p:outputLabel value="VALOR POR AÑOS TRANSCURRIDOS EN TRANSFERENCIA DE DOMINIO"/>
                                        <p:inputText id="pValAnosTrans" value="#{gestionAlcabalasControlador.catastroPredialPlusvaliaValoracion.catprepluvalAniosTransfVal}"
                                                  disabled="true"/>
                                        
                                        <p:outputLabel value="DIFERENCIA"/>
                                        <p:inputText id="pDifFinal" value="#{gestionAlcabalasControlador.catastroPredialPlusvaliaValoracion.catprepluvalDifFinal}"
                                                  disabled="true"/>
                                                                                
                                        <p:outputLabel value="REBAJA POR DESVALORIZACIÓN"/>
                                        <p:inputText id="pRebDes" value="#{gestionAlcabalasControlador.catastroPredialPlusvaliaValoracion.catprepluvalPorcRebaja}"
                                                 disabled="true" />
                                        <p:outputLabel value="VALOR REBAJA POR DESVALORIZACIÓN"/>
                                        <p:inputText id="pValRebDes" value="#{gestionAlcabalasControlador.catastroPredialPlusvaliaValoracion.catprepluvalValorRebaja}"
                                                disabled="true"  />
                                        
                                        <p:outputLabel value="BASE IMPONIBLE"/>
                                        <p:inputText id="pBasImp" value="#{gestionAlcabalasControlador.catastroPredialPlusvaliaValoracion.catprepluvalBaseimp}"
                                                 disabled="true" />
                                        <p:outputLabel value="IMPUESTO"/>
                                        <p:inputText id="pImpuesto" value="#{gestionAlcabalasControlador.catastroPredialPlusvaliaValoracion.catprepluvalImpuesto}"
                                            disabled="true"/>
                                     
                                        <p:outputLabel value="PROCESAMIENTO"/>
                                        <p:inputText id="pProc" value="#{gestionAlcabalasControlador.catastroPredialPlusvaliaValoracion.catprepluvalTasaproc}"
                                            disabled="true"/>
                                        
                                </h:panelGrid>                                                                                                       
                                
                                </p:panel>
                            
                       <p:commandButton value="#{txt.guardar_btn}" 
                                                     id="btnGuardarPlus" 
                                                     action="#{gestionAlcabalasControlador.guardarPlusvalia()}" 
                                                     icon="ui-icon-disk"  
                                                     process="@this,pnlDet" 
                                                     update=":frmAlcabalas:msgs"
                                                     async="true"
                                                     global="false"
                                                     />                                                                              
                                                                                                                                           
                  </h:panelGrid>
                </center>
</html>        